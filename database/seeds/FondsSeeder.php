<?php

use Illuminate\Database\Seeder;
use  \Illuminate\Support\Facades\Hash;

class FondsSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        //
        $faker = Faker\Factory::create();
        $arrayNames  = ["Акбике", "Нагиша", "Акбопе", "Фариза", "Акбота", "Акгулим", "Гульдана", "Акгуль", "Гульдара", "Дара", "Гульдарига", "Адеми", "Гульдария", "Акжамал", "Зарина", "Гульжазира", "Гульжайна", "Аклима", "Гульжамиля", "Дурия", "Адия", "Акмарал", "Гульжан", "Гульжанар", "Рухия", "Дайнана", "Карлыгаш", "Зауреш", "Шамсия", "Акселеу", "Куаныш", "Фатима", "Малика", "Муса", "Аксулу", "Рахила", "Актлек", "Аягоз", "Анар", "Актолкын", "Актоты", "Умигулсим", "Дамеля", "Зейне", "Зейнеп", "Саулет", "Акша", "Зейнеп, Зейнап", "Акшара", "Шарбану", "Смотреть все  женские казахские имена", "Бекнияз", "Ерден", "Максат", "Бекнур", "Нариман", "Бексеит", "Ердос", "Бексултан", "Кобыланды", "Бернар", "Бектай", "Ержан", "Бектас", "Ержетер", "Бектемир", "Ержигит", "Кентай", "Бектлеу", "Бектурсын", "Бердибай", "Бердибек", "Ерке", "Махамбет", "Серали", "Берен", "Досай", "Еркеболат", "Асан", "Берик", "Досалы", "Еркебулан", "Бернур", "Асан, Хасен", "Биали", "Бибатыр", "Ерман", "Бигельди", "Ермек", "Керим", "Бижан", "Бизат", "Малик", "Рашит", "Биман", "Биржан", "Богенбай", "Шакарим", "Болат", "Ермурза"];

        $data = [
                'title'=>'"'.$arrayNames[rand(1,10)].'"',
                'about'=>'Общественная организация «Менің Атамекенім» (далее – ОО МА) – это некоммерческая организация, целью которого является развитие социальной ответственности бизнеса и изменение отношения бизнеса к решению социальных проблем, а также стратегическое развитие института благотворительности в Казахстане. Миссия ОО МА – развитие культуры благотворительности среди предпринимателей через позиционирование национальных ценностей в обществе и осознание непреходящих человеческих ценностей. Приоритетные направления: - концептуальное развитие благотворительной деятельности; - развитие социальной ответственности бизнеса; - развитие волонтерского движения; - развитие сельских территорий; - оказание благотворительной помощи.Общественная организация «Менің Атамекенім» (далее – ОО МА) – это некоммерческая организация, целью которого является развитие социальной ответственности бизнеса и изменение отношения бизнеса к решению социальных проблем, а также стратегическое развитие института благотворительности в Казахстане.',
                'mission'=>'Миссия ОО МА – развитие культуры благотворительности среди предпринимателей через позиционирование национальных ценностей в обществе и осознание непреходящих человеческих ценностей.
                Приоритетные направления:
                - концептуальное развитие благотворительной деятельности;
                - развитие социальной ответственности бизнеса;
                - развитие волонтерского движения;
                - развитие сельских территорий;
                - оказание благотворительной помощи.',
                'password'=> Hash::make('123456'),
                'email'=>'@conversion.kz',
                'bin'=>'12345678912',
                'phone'=>'777754554',
        ];

        for ($i=0;$i<=20; $i++){
            $name = $arrayNames[rand(1,20)];
            if(!DB::table('fonds')->where('title', $name)->first()){
//                try{
                $region = rand(720,738);
                    $value = [];
                    $value['title'] = 'Фонд "'.$name.'"';
                    $value['status'] = 1;
                    $value['org_type'] = 1;
                    $value['about'] = $data['about'];
                    $value['mission'] = $data['mission'];
                    $value['website'] = str_replace(' ','',strtolower($faker->name)).'.kz';
                    $value['foundation_date']=date('Y-m-d', strtotime(rand(1,30).'-01-'.rand(2000, 2020)));
                    $value['bin'] = rand(100000000000, 999999999999);
                    $value['password']= Hash::make('123456');
                    $value['phone'] = $data['phone'].($i+1);
                    $value['email'] = 'info'.($i+1).$data['email'];
                    $value['latitude'] = $faker->latitude($min = 65, $max = 70);
                    $value['longitude'] = $faker->longitude($min = 40, $max = 60);
                    $value['help_location_region'] = $region;
                    $city = \App\City::whereRegionId($region)->inRandomOrder()->limit(1)->pluck('city_id')->toArray();
                    if(count($city)>0){
                        $value['help_location_city'] = $city[0];
                    }
                    $data = \App\Fond::create($value);
                    $data->baseHelpTypes()->attach([rand(1,2), rand(3,4)]);
                    $data->destinations()->attach([rand(1,2), rand(3,4)]);

                    $data->destinations_attribute()->attach([rand(1,2), rand(3,4)]);
//                }catch (Exception $exception){
//                    continue;
//                }
            }
        }

    }
}
